<div class="container">
    <div class="form">
        <mat-form-field floatLabel="auto" appearance="fill">
            <mat-label id="label">Project</mat-label>
            <input [value]="projectName === undefined ? '': projectName" matInput readonly>
        </mat-form-field>
        <button type="button" mat-icon-button color="primary" (click)="getProjectList()">
            <i class="material-icons">
                search
            </i>
        </button>
    </div>
</div>
<mat-divider></mat-divider>
<div *ngIf="isSearch">
<div *ngFor="let task of searchTasks">
    <div *ngIf="task">
        <table id="tasktable">
            <thead>
              <tr>
                <th>Task</th>       
                <th>Parent</th>
                <th>Priority</th>
                <th>Start</th>
                <th>End</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody  id="tasks" align="center">          
              <tr>
                <td>
                   <mat-card class="card">{{task.taskName}}
                    </mat-card>
                </td>
                              
                <td>
                   <mat-card class="card">{{((task.parentName) ? task.parentName : 'NO Parent')}}
                   </mat-card>
                </td>             
                <td>{{task.priority}}</td>
                <td>{{task.startDate | date: 'dd/MM/yyyy'}}</td>
                <td>{{task.endDate | date: 'dd/MM/yyyy'}}</td>
                <td>
                  <button *ngIf="task.status != 'complete'" mat-icon-button color="accent" [disabled]="task.status === 'complete'">
                    <a [routerLink]="['edit',task.taskId]">
                      <mat-icon aria-label="Edit">edit</mat-icon></a>
                  </button>
                  <button *ngIf="task.status === 'complete'" mat-icon-button color="accent" [disabled]="task.status === 'complete'">
                        <mat-icon aria-label="Edit">edit</mat-icon>
                    </button>
                  <button mat-icon-button color="accent" (click)="endTask(task.taskId, task.taskName, task.projectName,
                  task.parentName, task.priority, task.startDate, task.endDate, task.userName)" [disabled]="task.status === 'complete'">
                    <mat-icon aria-label="End">close</mat-icon>
                  </button>
                </td>
                
              </tr>
            </tbody>
                
            <mat-divider></mat-divider>
        </table>    
    </div>
</div>
</div>
<div *ngIf="!ifResult">
    <p align="center">No Tasks Found</p> 
</div>
<div *ngIf="!isSearch">
  <p id="searchResult" align="center">Select Project</p> 
</div>
